import{_ as ce,y as pe,z as J,r as O,o as _e,b as V,d as t,g as l,w as a,h as u,A as fe,B as ge,i as _,C as ve,e as i,u as o,D as P,F as x,E as z,G as C,t as f,H as be,I as Ve,J as ye,K as ke,L as K,M as Ce,N as we,O as Se,P as xe,l as ze,Q as Be,n as L,R as w,S as Ue}from"./index-CqiuWbKT.js";const Fe={class:"recommend-view"},Ge={class:"filter-header"},Ne={class:"filter-actions"},$e={key:0,class:"filter-section"},Me={class:"quick-filters"},Oe={class:"collapse-title"},Re={class:"brand-tags"},De={class:"collapse-title"},Ee={class:"price-range"},Ie={class:"range-values"},Je={class:"popular-price-ranges"},Pe={class:"collapse-title"},Ke={class:"importance-rating"},Le={class:"rating-row"},Te={class:"rating-row"},qe={class:"rating-row"},je={class:"rating-row"},Ae={class:"collapse-title"},Qe={class:"spec-filters"},We={class:"spec-filter-item"},He={class:"spec-filter-item"},Xe={class:"spec-filter-item"},Ye={class:"collapse-title"},Ze={class:"usage-filters"},he={class:"collapse-title"},el={class:"advanced-filters"},ll={class:"spec-filter-item"},tl={class:"spec-filter-item"},sl={class:"spec-filter-item"},al={class:"spec-filter-item"},ol={class:"spec-filter-item mt-10"},nl={class:"recommendation-header"},il={key:0,class:"phone-grid"},dl={class:"phone-card-inner"},rl={class:"phone-image-container"},ul=["src","alt"],ml=["onClick"],cl={class:"phone-title"},pl={class:"phone-info"},_l={class:"price"},fl={class:"match-score"},gl={class:"phone-specs"},vl={class:"spec-item"},bl={class:"spec-item"},Vl={class:"phone-ratings"},yl={class:"rating-item"},kl={class:"rating-item"},Cl={class:"rating-item"},wl={class:"usage-tags"},Sl={__name:"RecommendView",setup(xl){const T=fe(),v=pe(),{loading:q,recommendations:F}=J(v),{preferences:n,availableBrands:j}=J(v),R=O(["brand","price"]),A={1e3:"1K",5e3:"5K",8e3:"8K",12e3:"12K"},D=O([{name:"性价比之选",type:"success",filter:{budget:[2e3,4e3],performance:4,camera:3,battery:4}},{name:"拍照旗舰",type:"danger",filter:{budget:[4e3,12e3],camera:5,usage:["拍照"]}},{name:"游戏性能",type:"warning",filter:{performance:5,ram:8,usage:["游戏"]}},{name:"轻薄便携",type:"info",filter:{screenSize:"small",battery:3}}]),y=O([]),Q=async d=>{const e=n.value.brand.indexOf(d);e>-1?n.value.brand.splice(e,1):n.value.brand.push(d),await m()},B=d=>{n.value.budget=d,m()},W=d=>{const e={...n.value,...d.filter};Object.keys(e).forEach(c=>{n.value[c]=e[c]}),m(),w.success(`已应用"${d.name}"筛选`)},H=async()=>{try{const{value:d}=await Ue.prompt("请输入筛选名称","保存筛选",{confirmButtonText:"确认",cancelButtonText:"取消",inputValidator:e=>e?!0:"筛选名称不能为空"});if(d){const e={name:d,filter:JSON.parse(JSON.stringify(n.value))};y.value.push(e),localStorage.setItem("savedFilters",JSON.stringify(y.value)),w.success("筛选条件已保存")}}catch{}},X=d=>{Object.keys(d.filter).forEach(e=>{n.value[e]=d.filter[e]}),m(),w.success(`已应用"${d.name}"筛选`)},Y=d=>{y.value.splice(d,1),localStorage.setItem("savedFilters",JSON.stringify(y.value)),w.success("已删除筛选条件")},Z=async()=>{await v.reset(),await v.generateRecommendations(),w.success("已重置所有筛选条件")},m=async()=>{await v.generateRecommendations()},h=d=>{console.log("跳转到详情页，ID:",d),T.push(`/detail/${d}`)},ee=d=>{const e=d/25*100;return e>=80?"success":e>=60?"warning":"exception"},le=d=>{const e=d/25*100;return e>=80?"match-excellent":e>=60?"match-good":"match-fair"},E=d=>v.favoriteList.includes(d),te=(d,e)=>{d.stopPropagation(),v.toggleFavorite(e)&&(E(e)?w.success("已添加到收藏"):w.success("已从收藏中移除"))};return _e(async()=>{const d=localStorage.getItem("savedFilters");d&&(y.value=JSON.parse(d)),await v.initialize(),await v.generateRecommendations()}),(d,e)=>{const c=u("el-icon"),b=u("el-button"),G=u("el-tooltip"),U=u("el-tag"),S=u("el-collapse-item"),se=u("el-slider"),k=u("el-rate"),p=u("el-option"),N=u("el-select"),g=u("el-checkbox"),ae=u("el-checkbox-group"),$=u("el-radio"),oe=u("el-radio-group"),ne=u("el-collapse"),M=u("el-card"),I=u("el-col"),ie=u("el-progress"),de=u("el-empty"),re=u("el-row"),ue=ge("loading");return _(),V("div",Fe,[e[62]||(e[62]=t("div",{class:"bg-gradient-1"},null,-1)),e[63]||(e[63]=t("div",{class:"bg-gradient-2"},null,-1)),l(re,{gutter:30},{default:a(()=>[l(I,{xs:24,sm:24,md:8,lg:6,xl:5},{default:a(()=>[l(M,{class:"filter-card",shadow:"hover"},{header:a(()=>[t("div",Ge,[t("h3",null,[l(c,null,{default:a(()=>e[19]||(e[19]=[t("filter",null,null,-1)])),_:1,__:[19]}),e[20]||(e[20]=i(" 智能筛选"))]),t("div",Ne,[l(G,{content:"保存当前筛选",placement:"top"},{default:a(()=>[l(b,{type:"success",onClick:H,size:"small",circle:""},{default:a(()=>[l(c,null,{default:a(()=>[l(o(xe))]),_:1})]),_:1})]),_:1}),l(b,{type:"primary",onClick:Z,size:"small",class:"reset-btn"},{default:a(()=>[l(c,null,{default:a(()=>[l(o(ze))]),_:1}),e[21]||(e[21]=i(" 重置 "))]),_:1,__:[21]})])])]),default:a(()=>[y.value.length>0||D.value.length>0?(_(),V("div",$e,[t("h4",null,[l(c,null,{default:a(()=>[l(o(P))]),_:1}),e[22]||(e[22]=i(" 快速筛选"))]),t("div",Me,[(_(!0),V(x,null,z(D.value,s=>(_(),C(b,{key:s.name,size:"small",onClick:r=>W(s),type:s.type||"default",class:"quick-filter-btn"},{default:a(()=>[i(f(s.name),1)]),_:2},1032,["onClick","type"]))),128)),(_(!0),V(x,null,z(y.value,(s,r)=>(_(),C(b,{key:"saved-"+r,size:"small",onClick:me=>X(s),type:"info",class:"quick-filter-btn saved-filter"},{default:a(()=>[i(f(s.name)+" ",1),l(c,{class:"delete-icon",onClick:be(me=>Y(r),["stop"])},{default:a(()=>[l(o(Ve))]),_:2},1032,["onClick"])]),_:2},1032,["onClick"]))),128))])])):ve("",!0),l(ne,{modelValue:R.value,"onUpdate:modelValue":e[18]||(e[18]=s=>R.value=s),accordion:"",class:"filter-collapse"},{default:a(()=>[l(S,{name:"brand"},{title:a(()=>[t("h4",Oe,[l(c,null,{default:a(()=>[l(o(ye))]),_:1}),e[23]||(e[23]=i(" 品牌选择"))])]),default:a(()=>[t("div",Re,[(_(!0),V(x,null,z(o(j),s=>(_(),C(U,{key:s,type:o(n).brand.includes(s)?"success":"info",class:"brand-tag",onClick:r=>Q(s),effect:o(n).brand.includes(s)?"dark":"light"},{default:a(()=>[i(f(s),1)]),_:2},1032,["type","onClick","effect"]))),128))])]),_:1}),l(S,{name:"price"},{title:a(()=>[t("h4",De,[l(c,null,{default:a(()=>[l(o(ke))]),_:1}),e[24]||(e[24]=i(" 价格区间"))])]),default:a(()=>[t("div",Ee,[t("div",Ie,[t("span",null,"¥"+f(o(n).budget[0]),1),t("span",null,"¥"+f(o(n).budget[1]),1)]),l(se,{modelValue:o(n).budget,"onUpdate:modelValue":e[0]||(e[0]=s=>o(n).budget=s),range:"",min:1e3,max:12e3,step:500,marks:A,onChange:m,class:"budget-slider"},null,8,["modelValue"]),t("div",Je,[l(b,{size:"small",onClick:e[1]||(e[1]=s=>B([1e3,3e3]))},{default:a(()=>e[25]||(e[25]=[i("入门")])),_:1,__:[25]}),l(b,{size:"small",onClick:e[2]||(e[2]=s=>B([3e3,5e3]))},{default:a(()=>e[26]||(e[26]=[i("中端")])),_:1,__:[26]}),l(b,{size:"small",onClick:e[3]||(e[3]=s=>B([5e3,8e3]))},{default:a(()=>e[27]||(e[27]=[i("高端")])),_:1,__:[27]}),l(b,{size:"small",onClick:e[4]||(e[4]=s=>B([8e3,12e3]))},{default:a(()=>e[28]||(e[28]=[i("旗舰")])),_:1,__:[28]})])])]),_:1}),l(S,{name:"performance"},{title:a(()=>[t("h4",Pe,[l(c,null,{default:a(()=>[l(o(K))]),_:1}),e[29]||(e[29]=i(" 性能需求"))])]),default:a(()=>[t("div",Ke,[t("div",Le,[e[30]||(e[30]=t("span",null,"相机重要性",-1)),l(k,{modelValue:o(n).camera,"onUpdate:modelValue":e[5]||(e[5]=s=>o(n).camera=s),onChange:m,class:"custom-rate"},null,8,["modelValue"])]),t("div",Te,[e[31]||(e[31]=t("span",null,"性能重要性",-1)),l(k,{modelValue:o(n).performance,"onUpdate:modelValue":e[6]||(e[6]=s=>o(n).performance=s),onChange:m,class:"custom-rate"},null,8,["modelValue"])]),t("div",qe,[e[32]||(e[32]=t("span",null,"电池重要性",-1)),l(k,{modelValue:o(n).battery,"onUpdate:modelValue":e[7]||(e[7]=s=>o(n).battery=s),onChange:m,class:"custom-rate"},null,8,["modelValue"])]),t("div",je,[e[33]||(e[33]=t("span",null,"屏幕重要性",-1)),l(k,{modelValue:o(n).screen,"onUpdate:modelValue":e[8]||(e[8]=s=>o(n).screen=s),onChange:m,class:"custom-rate"},null,8,["modelValue"])])])]),_:1}),l(S,{name:"storage"},{title:a(()=>[t("h4",Ae,[l(c,null,{default:a(()=>[l(o(Ce))]),_:1}),e[34]||(e[34]=i(" 硬件配置"))])]),default:a(()=>[t("div",Qe,[t("div",We,[e[35]||(e[35]=t("span",{class:"spec-label"},"存储容量",-1)),l(N,{modelValue:o(n).storage,"onUpdate:modelValue":e[9]||(e[9]=s=>o(n).storage=s),placeholder:"选择存储容量",onChange:m,class:"custom-select"},{default:a(()=>[l(p,{label:"不限",value:0}),l(p,{label:"64GB",value:64}),l(p,{label:"128GB",value:128}),l(p,{label:"256GB",value:256}),l(p,{label:"512GB",value:512}),l(p,{label:"1TB",value:1024})]),_:1},8,["modelValue"])]),t("div",He,[e[36]||(e[36]=t("span",{class:"spec-label"},"运行内存",-1)),l(N,{modelValue:o(n).ram,"onUpdate:modelValue":e[10]||(e[10]=s=>o(n).ram=s),placeholder:"选择运行内存",onChange:m,class:"custom-select"},{default:a(()=>[l(p,{label:"不限",value:0}),l(p,{label:"4GB",value:4}),l(p,{label:"6GB",value:6}),l(p,{label:"8GB",value:8}),l(p,{label:"12GB",value:12}),l(p,{label:"16GB",value:16})]),_:1},8,["modelValue"])]),t("div",Xe,[e[37]||(e[37]=t("span",{class:"spec-label"},"屏幕尺寸",-1)),l(N,{modelValue:o(n).screenSize,"onUpdate:modelValue":e[11]||(e[11]=s=>o(n).screenSize=s),placeholder:"选择屏幕尺寸",onChange:m,class:"custom-select"},{default:a(()=>[l(p,{label:"不限",value:0}),l(p,{label:"小屏 (≤6.1英寸)",value:"small"}),l(p,{label:"中屏 (6.1-6.5英寸)",value:"medium"}),l(p,{label:"大屏 (>6.5英寸)",value:"large"})]),_:1},8,["modelValue"])])])]),_:1}),l(S,{name:"usage"},{title:a(()=>[t("h4",Ye,[l(c,null,{default:a(()=>[l(o(we))]),_:1}),e[38]||(e[38]=i(" 使用场景"))])]),default:a(()=>[t("div",Ze,[l(ae,{modelValue:o(n).usage,"onUpdate:modelValue":e[12]||(e[12]=s=>o(n).usage=s),onChange:m,class:"usage-checkbox-group"},{default:a(()=>[l(g,{label:"游戏"},{default:a(()=>e[39]||(e[39]=[i("游戏玩家")])),_:1,__:[39]}),l(g,{label:"拍照"},{default:a(()=>e[40]||(e[40]=[i("摄影爱好者")])),_:1,__:[40]}),l(g,{label:"社交"},{default:a(()=>e[41]||(e[41]=[i("社交达人")])),_:1,__:[41]}),l(g,{label:"办公"},{default:a(()=>e[42]||(e[42]=[i("商务办公")])),_:1,__:[42]}),l(g,{label:"影音"},{default:a(()=>e[43]||(e[43]=[i("影音娱乐")])),_:1,__:[43]}),l(g,{label:"学生"},{default:a(()=>e[44]||(e[44]=[i("学生党")])),_:1,__:[44]})]),_:1},8,["modelValue"])])]),_:1}),l(S,{name:"advanced"},{title:a(()=>[t("h4",he,[l(c,null,{default:a(()=>[l(o(Se))]),_:1}),e[45]||(e[45]=i(" 高级选项"))])]),default:a(()=>[t("div",el,[t("div",ll,[l(g,{modelValue:o(n).hasNFC,"onUpdate:modelValue":e[13]||(e[13]=s=>o(n).hasNFC=s),onChange:m},{default:a(()=>e[46]||(e[46]=[i("支持 NFC")])),_:1,__:[46]},8,["modelValue"])]),t("div",tl,[l(g,{modelValue:o(n).has5G,"onUpdate:modelValue":e[14]||(e[14]=s=>o(n).has5G=s),onChange:m},{default:a(()=>e[47]||(e[47]=[i("支持 5G")])),_:1,__:[47]},8,["modelValue"])]),t("div",sl,[l(g,{modelValue:o(n).hasWirelessCharge,"onUpdate:modelValue":e[15]||(e[15]=s=>o(n).hasWirelessCharge=s),onChange:m},{default:a(()=>e[48]||(e[48]=[i("无线充电")])),_:1,__:[48]},8,["modelValue"])]),t("div",al,[l(g,{modelValue:o(n).waterproof,"onUpdate:modelValue":e[16]||(e[16]=s=>o(n).waterproof=s),onChange:m},{default:a(()=>e[49]||(e[49]=[i("防水防尘")])),_:1,__:[49]},8,["modelValue"])]),t("div",ol,[e[53]||(e[53]=t("span",{class:"spec-label"},"系统偏好",-1)),l(oe,{modelValue:o(n).os,"onUpdate:modelValue":e[17]||(e[17]=s=>o(n).os=s),onChange:m,class:"os-radio-group"},{default:a(()=>[l($,{label:""},{default:a(()=>e[50]||(e[50]=[i("不限")])),_:1,__:[50]}),l($,{label:"Android"},{default:a(()=>e[51]||(e[51]=[i("安卓")])),_:1,__:[51]}),l($,{label:"iOS"},{default:a(()=>e[52]||(e[52]=[i("iOS")])),_:1,__:[52]})]),_:1},8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(I,{xs:24,sm:24,md:16,lg:18,xl:19},{default:a(()=>[Be((_(),C(M,{shadow:"hover",class:"results-card"},{header:a(()=>[t("div",nl,[t("h3",null,[l(c,null,{default:a(()=>[l(o(P))]),_:1}),e[54]||(e[54]=i(" 推荐手机"))]),l(U,{type:"info",effect:"dark",class:"result-count"},{default:a(()=>[i("找到 "+f(o(F).length)+" 款手机",1)]),_:1})])]),default:a(()=>[o(F).length>0?(_(),V("div",il,[(_(!0),V(x,null,z(o(F),s=>(_(),C(M,{key:s.id,class:"phone-card",shadow:"hover"},{default:a(()=>[t("div",dl,[t("div",rl,[t("img",{src:s.image,alt:s.name,class:"phone-image"},null,8,ul),t("div",{class:L(["match-badge",le(s.matchScore)])},f(Math.min(100,Math.round(s.matchScore/25*100)))+"% ",3),t("button",{class:L(["favorite-btn",{"is-favorite":E(s.id)}]),onClick:r=>te(r,s.id),title:"收藏"},[l(c,null,{default:a(()=>[l(o(K))]),_:1})],10,ml)]),t("h4",cl,f(s.name),1),t("div",pl,[l(U,{size:"small",effect:"dark",type:"success",class:"brand-badge"},{default:a(()=>[i(f(s.brand),1)]),_:2},1024),t("span",_l,"¥"+f(s.price.toLocaleString()),1)]),t("div",fl,[l(ie,{percentage:Math.min(100,s.matchScore/25*100),format:r=>`匹配度: ${r}%`,status:ee(s.matchScore),"stroke-width":10,class:"match-progress"},null,8,["percentage","format","status"])]),t("div",gl,[t("div",vl,[l(G,{content:"存储容量",placement:"top",effect:"light"},{default:a(()=>[e[55]||(e[55]=t("i",{class:"el-icon spec-icon"},"💾",-1)),t("span",null,f(s.storage)+"GB",1)]),_:2,__:[55]},1024)]),t("div",bl,[l(G,{content:"屏幕尺寸",placement:"top",effect:"light"},{default:a(()=>[e[56]||(e[56]=t("i",{class:"el-icon spec-icon"},"📱",-1)),t("span",null,f(s.screen)+'"',1)]),_:2,__:[56]},1024)])]),t("div",Vl,[t("div",yl,[e[57]||(e[57]=t("span",{class:"rating-label"},"相机",-1)),l(k,{modelValue:s.camera,"onUpdate:modelValue":r=>s.camera=r,disabled:"",size:"small",class:"custom-rate"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",kl,[e[58]||(e[58]=t("span",{class:"rating-label"},"性能",-1)),l(k,{modelValue:s.performance,"onUpdate:modelValue":r=>s.performance=r,disabled:"",size:"small",class:"custom-rate"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Cl,[e[59]||(e[59]=t("span",{class:"rating-label"},"电池",-1)),l(k,{modelValue:s.battery,"onUpdate:modelValue":r=>s.battery=r,disabled:"",size:"small",class:"custom-rate"},null,8,["modelValue","onUpdate:modelValue"])])]),t("div",wl,[(_(!0),V(x,null,z(s.usage,r=>(_(),C(U,{key:r,size:"small",type:o(n).usage.includes(r)?"warning":"info",effect:"plain",class:"usage-tag"},{default:a(()=>[i(f(r),1)]),_:2},1032,["type"]))),128))]),l(b,{type:"primary",onClick:r=>h(s.id),size:"default",class:"detail-btn"},{default:a(()=>[l(c,null,{default:a(()=>e[60]||(e[60]=[t("view",null,null,-1)])),_:1,__:[60]}),e[61]||(e[61]=i(" 查看详情 "))]),_:2,__:[61]},1032,["onClick"])])]),_:2},1024))),128))])):(_(),C(de,{key:1,description:"暂无符合条件的手机","image-size":200}))]),_:1})),[[ue,o(q)]])]),_:1})]),_:1})])}}},Bl=ce(Sl,[["__scopeId","data-v-0d7fccd8"]]);export{Bl as default};
