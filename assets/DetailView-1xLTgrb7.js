import{_ as ve,T as me,b as a,d as e,C as D,t as l,g as m,w as V,h as g,F as u,E as _,e as U,n as b,U as w,y as ue,r as p,V as _e,c as M,o as pe,W as ge,X as he,R as S,A as fe,i,G as be}from"./index-CqiuWbKT.js";const we={name:"DetailView",components:{Location:me},props:{id:{type:[Number,String],default:null}},setup(x){const s=fe(),T=he(),o=ue(),r=p(null),B=p(!0),y=p(null),R=p(!1),I=p("specs"),k=p(0),C=p({}),h=p(128),L=p([]),f=_e({rating:0,comment:"",username:"ç”¨æˆ·"+Math.floor(Math.random()*1e4)}),t=[{label:"64GB",value:64},{label:"128GB",value:128},{label:"256GB",value:256},{label:"512GB",value:512}],d=M(()=>{const n=t.find(c=>c.value===h.value);return n?n.label:r.value.storage+"GB"}),v=M(()=>r.value?[r.value.image,r.value.image,r.value.image]:[]),A=[{id:"specs",name:"è§„æ ¼å‚æ•°"},{id:"features",name:"äº§å“ç‰¹ç‚¹"},{id:"reviews",name:"ç”¨æˆ·è¯„ä»·"}],G=["#f5f7fa","#303133","#42b983","#e6a23c","#f56c6c"],E=n=>{k.value=n},X=n=>{h.value=n},Y=()=>{S.success("è´­ä¹°åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼")},z=()=>{S.success("è´­ä¹°åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼")},O=()=>{const n={...f,date:new Date};L.value.unshift(n),f.rating=0,f.comment="",S.success("è¯„è®ºå·²æäº¤ï¼Œæ„Ÿè°¢æ‚¨çš„åé¦ˆï¼")},Q=n=>{if(!n)return"";const c=new Date(n);return`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`},W=n=>{if(!R.value)return;const c=n.currentTarget,{left:te,top:ne,width:ie,height:ae}=c.getBoundingClientRect(),le=(n.clientX-te)/ie*2-1,re=(n.clientY-ne)/ae*2-1,P=15,de=-re*P,ce=le*P;C.value={transform:`
          perspective(1000px) 
          rotateX(${de}deg) 
          rotateY(${ce}deg)
          scale3d(1.05, 1.05, 1.05)
        `,transition:"transform 0.1s ease-out"}},N=()=>{C.value={transform:"perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)",transition:"transform 0.8s ease-in-out"}},j=n=>{if(!n)return 0;const c=(n.camera+n.performance+n.battery)/3;return parseFloat(c.toFixed(1))},q=n=>n?n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0",H=M(()=>r.value?o.phones.filter(n=>n.id!==r.value.id&&n.brand===r.value.brand).slice(0,4):[]),F=()=>{B.value=!0,y.value=null;try{const n=x.id||Number(T.params.id);if(console.log("DetailView - å°è¯•åŠ è½½æ‰‹æœºID:",n),console.log("DetailView - è·¯ç”±å‚æ•°:",T.params),!n||isNaN(Number(n)))throw new Error("æ— æ•ˆçš„æ‰‹æœºIDï¼Œè¯·æ£€æŸ¥URL");const c=o.getPhoneDetail(Number(n));if(console.log("DetailView - èŽ·å–åˆ°çš„æ‰‹æœºæ•°æ®:",c?"æˆåŠŸ":"å¤±è´¥"),!c)throw new Error(`æ‰¾ä¸åˆ°IDä¸º${n}çš„æ‰‹æœº`);r.value=c}catch(n){console.error("DetailView - åŠ è½½é”™è¯¯:",n),y.value=n.message||"åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•"}finally{B.value=!1}},J=()=>{F()},K=()=>{s.push("/recommend")},Z=n=>{s.push(`/detail/${n}`)},$=M(()=>r.value?o.compareList.includes(r.value.id):!1),ee=M(()=>r.value?o.favoriteList.includes(r.value.id):!1),se=()=>{r.value&&o.toggleCompare(r.value.id)},oe=()=>{r.value&&o.toggleFavorite(r.value.id)};return pe(()=>{F(),N()}),ge(()=>T.params.id,n=>{n&&(F(),N())}),{phone:r,loading:B,error:y,imageLoaded:R,reloadData:J,goBack:K,viewDetail:Z,isInCompareList:$,isInFavoriteList:ee,addToCompare:se,toggleFavorite:oe,activeTab:I,tabs:A,selectedColor:k,colors:G,tiltStyle:C,handleMouseMove:W,resetTilt:N,formatPrice:q,similarPhones:H,getAverageRating:j,phoneImages:v,selectColor:E,memoryOptions:t,selectedMemory:h,selectedMemoryLabel:d,selectMemory:X,buyNow:Y,addToCart:z,reviews:L,newReview:f,submitReview:O,formatDate:Q}}},ye={class:"detail-view"},ke={class:"container"},Ce={class:"header-bar"},De={class:"content-wrapper"},Ve={key:0,class:"loading-section"},Me={key:1,class:"error-section"},Te={key:2,class:"detail-content"},Be={class:"phone-image-section"},Re=["src","alt"],Le={class:"color-selector"},Ie={class:"color-options"},Ne=["onClick"],Fe={class:"phone-info-section"},Se={class:"info-main"},xe={class:"brand-price"},Pe={class:"phone-brand"},Ue={class:"phone-price"},Ae={class:"phone-name"},Ge={class:"rating-overview"},Ee={class:"rating-stars"},Xe={class:"star-group"},Ye={class:"rating-value"},ze={class:"stars"},Oe={class:"rating-count"},Qe={class:"purchase-options"},We={class:"memory-options"},je={class:"memory-selector"},qe=["onClick"],He={class:"delivery-options"},Je={class:"delivery-item"},Ke={class:"delivery-item"},Ze={class:"action-buttons"},$e={class:"tabs"},es={class:"tab-header"},ss=["onClick"],os={class:"tab-content"},ts={key:0,class:"specs-section"},ns={class:"specs-row"},is={class:"spec-card"},as={class:"spec-detail"},ls={class:"spec-value"},rs={class:"spec-card"},ds={class:"spec-detail"},cs={class:"spec-value"},vs={class:"spec-card"},ms={class:"spec-detail"},us={class:"spec-value"},_s={class:"spec-card"},ps={class:"spec-detail"},gs={class:"spec-value"},hs={class:"performance-bars"},fs={class:"performance-item"},bs={class:"perf-bar-container"},ws={class:"perf-value"},ys={class:"performance-item"},ks={class:"perf-bar-container"},Cs={class:"perf-value"},Ds={class:"performance-item"},Vs={class:"perf-bar-container"},Ms={class:"perf-value"},Ts={class:"performance-item"},Bs={class:"perf-bar-container"},Rs={class:"perf-value"},Ls={key:1,class:"features-section"},Is={class:"features-list"},Ns={class:"feature-text"},Fs={key:0,class:"usage-section"},Ss={class:"usage-tags"},xs={key:2,class:"reviews-section"},Ps={class:"add-review"},Us={class:"review-form"},As={class:"review-rating"},Gs={class:"reviews-list"},Es={key:0,class:"no-reviews"},Xs={class:"review-header"},Ys={class:"reviewer-info"},zs={class:"reviewer-avatar"},Os={class:"reviewer-details"},Qs={class:"reviewer-name"},Ws={class:"review-date"},js={class:"review-rating"},qs={class:"review-content"},Hs={key:3,class:"similar-phones"},Js={class:"similar-phones-grid"},Ks=["onClick"],Zs=["src","alt"],$s={class:"similar-phone-info"},eo={class:"similar-phone-name"},so={class:"similar-phone-price"},oo={key:4,class:"not-found-section"};function to(x,s,T,o,r,B){const y=g("el-carousel-item"),R=g("el-carousel"),I=g("location"),k=g("el-icon"),C=g("truck"),h=g("el-rate"),L=g("el-input"),f=g("el-button");return i(),a("div",ye,[s[47]||(s[47]=e("div",{class:"bg-gradient"},null,-1)),e("div",ke,[e("div",Ce,[s[13]||(s[13]=e("h1",null,"æ‰‹æœºè¯¦æƒ…",-1)),e("button",{onClick:s[0]||(s[0]=(...t)=>o.goBack&&o.goBack(...t)),class:"back-btn"},"â† è¿”å›žåˆ—è¡¨")]),e("div",De,[o.loading?(i(),a("div",Ve,s[14]||(s[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"åŠ è½½ä¸­...",-1)]))):o.error?(i(),a("div",Me,[s[15]||(s[15]=e("h2",null,"å‡ºé”™äº†",-1)),e("p",null,l(o.error),1),e("button",{onClick:s[1]||(s[1]=(...t)=>o.reloadData&&o.reloadData(...t)),class:"primary-btn"},"é‡è¯•"),e("button",{onClick:s[2]||(s[2]=(...t)=>o.goBack&&o.goBack(...t)),class:"secondary-btn"},"è¿”å›žåˆ—è¡¨")])):o.phone?(i(),a("div",Te,[e("div",Be,[m(R,{interval:5e3,"indicator-position":"outside",class:"phone-carousel"},{default:V(()=>[(i(!0),a(u,null,_(o.phoneImages,(t,d)=>(i(),be(y,{key:d},{default:V(()=>[e("div",{class:"phone-showcase",onMousemove:s[4]||(s[4]=(...v)=>o.handleMouseMove&&o.handleMouseMove(...v)),onMouseleave:s[5]||(s[5]=(...v)=>o.resetTilt&&o.resetTilt(...v))},[e("div",{class:"phone-display",style:w(o.tiltStyle)},[e("img",{src:t,alt:o.phone.name,class:"phone-image",onLoad:s[3]||(s[3]=v=>o.imageLoaded=!0)},null,40,Re),s[16]||(s[16]=e("div",{class:"phone-shadow"},null,-1)),s[17]||(s[17]=e("div",{class:"phone-reflection"},null,-1))],4),s[18]||(s[18]=e("div",{class:"phone-stand"},[e("div",{class:"phone-platform"})],-1)),s[19]||(s[19]=e("div",{class:"view-hint"},[e("span",null,"ç§»åŠ¨é¼ æ ‡æŸ¥çœ‹ä¸åŒè§’åº¦")],-1))],32)]),_:2},1024))),128))]),_:1}),e("div",Le,[s[20]||(s[20]=e("span",{class:"color-title"},"é€‰æ‹©é¢œè‰²:",-1)),e("div",Ie,[(i(!0),a(u,null,_(o.phone.colors||o.colors,(t,d)=>(i(),a("div",{key:t,class:b(["color-option",{active:o.selectedColor===d}]),style:w({background:t}),onClick:v=>o.selectColor(d)},null,14,Ne))),128))])])]),e("div",Fe,[e("div",Se,[e("div",xe,[e("span",Pe,l(o.phone.brand),1),e("span",Ue,"Â¥"+l(o.formatPrice(o.phone.price)),1)]),e("h2",Ae,l(o.phone.name),1),e("div",Ge,[e("div",Ee,[e("div",Xe,[e("span",Ye,l(o.getAverageRating(o.phone)),1),e("div",ze,[(i(),a(u,null,_(5,t=>e("i",{key:t,class:b(["star",{filled:t<=o.getAverageRating(o.phone)}])},"â˜…",2)),64))])]),e("span",Oe,"ç»¼åˆè¯„åˆ† ("+l(o.reviews.length||0)+"æ¡è¯„ä»·)",1)])]),e("div",Qe,[e("div",We,[s[21]||(s[21]=e("span",{class:"memory-title"},"å­˜å‚¨é…ç½®:",-1)),e("div",je,[(i(!0),a(u,null,_(o.memoryOptions,t=>(i(),a("button",{key:t.value,class:b(["memory-btn",{active:o.selectedMemory===t.value}]),onClick:d=>o.selectMemory(t.value)},l(t.label),11,qe))),128))])]),e("div",He,[e("div",Je,[m(k,null,{default:V(()=>[m(I)]),_:1}),s[22]||(s[22]=e("span",null,[U("æ¸…è¿œå¸‚æ¸…åŸŽåŒº "),e("a",{href:"#",class:"change-link"},"ä¿®æ”¹")],-1))]),e("div",Ke,[m(k,null,{default:V(()=>[m(C)]),_:1}),s[23]||(s[23]=e("span",null,"é¢„è®¡æ¬¡æ—¥é€è¾¾",-1))])])]),e("div",Ze,[e("button",{class:"action-btn buy-btn",onClick:s[6]||(s[6]=(...t)=>o.buyNow&&o.buyNow(...t))}," ç«‹å³è´­ä¹° "),e("button",{class:"action-btn cart-btn",onClick:s[7]||(s[7]=(...t)=>o.addToCart&&o.addToCart(...t))}," åŠ å…¥è´­ç‰©è½¦ "),e("button",{class:b(["action-btn compare-btn",{disabled:o.isInCompareList}]),onClick:s[8]||(s[8]=(...t)=>o.addToCompare&&o.addToCompare(...t))},l(o.isInCompareList?"å·²æ·»åŠ åˆ°å¯¹æ¯”":"æ·»åŠ åˆ°å¯¹æ¯”"),3),e("button",{class:b(["action-btn favorite-btn",{"is-active":o.isInFavoriteList}]),onClick:s[9]||(s[9]=(...t)=>o.toggleFavorite&&o.toggleFavorite(...t))},l(o.isInFavoriteList?"å·²æ”¶è—":"æ”¶è—"),3)]),e("div",$e,[e("div",es,[(i(!0),a(u,null,_(o.tabs,t=>(i(),a("div",{key:t.id,class:b(["tab-item",{active:o.activeTab===t.id}]),onClick:d=>o.activeTab=t.id},l(t.name),11,ss))),128))]),e("div",os,[o.activeTab==="specs"?(i(),a("div",ts,[e("div",ns,[e("div",is,[s[25]||(s[25]=e("div",{class:"spec-icon"},"ðŸ“±",-1)),e("div",as,[s[24]||(s[24]=e("div",{class:"spec-label"},"å±å¹•å°ºå¯¸",-1)),e("div",ls,l(o.phone.screen)+" è‹±å¯¸",1)])]),e("div",rs,[s[27]||(s[27]=e("div",{class:"spec-icon"},"ðŸ’¾",-1)),e("div",ds,[s[26]||(s[26]=e("div",{class:"spec-label"},"å­˜å‚¨å®¹é‡",-1)),e("div",cs,l(o.selectedMemoryLabel),1)])]),e("div",vs,[s[29]||(s[29]=e("div",{class:"spec-icon"},"ðŸ”‹",-1)),e("div",ms,[s[28]||(s[28]=e("div",{class:"spec-label"},"ç”µæ± å®¹é‡",-1)),e("div",us,l(o.phone.batteryCapacity||"4500mAh"),1)])]),e("div",_s,[s[31]||(s[31]=e("div",{class:"spec-icon"},"âš¡",-1)),e("div",ps,[s[30]||(s[30]=e("div",{class:"spec-label"},"å……ç”µåŠŸçŽ‡",-1)),e("div",gs,l(o.phone.chargingPower||"33W"),1)])])]),s[36]||(s[36]=e("h4",{class:"section-subtitle"},"æ€§èƒ½è¯„åˆ†",-1)),e("div",hs,[e("div",fs,[s[32]||(s[32]=e("div",{class:"perf-label"},"ç›¸æœº",-1)),e("div",bs,[e("div",{class:"perf-bar",style:w({width:`${o.phone.camera*20}%`})},null,4),e("span",ws,l(o.phone.camera)+"/5",1)])]),e("div",ys,[s[33]||(s[33]=e("div",{class:"perf-label"},"æ€§èƒ½",-1)),e("div",ks,[e("div",{class:"perf-bar",style:w({width:`${o.phone.performance*20}%`})},null,4),e("span",Cs,l(o.phone.performance)+"/5",1)])]),e("div",Ds,[s[34]||(s[34]=e("div",{class:"perf-label"},"ç”µæ± ",-1)),e("div",Vs,[e("div",{class:"perf-bar",style:w({width:`${o.phone.battery*20}%`})},null,4),e("span",Ms,l(o.phone.battery)+"/5",1)])]),e("div",Ts,[s[35]||(s[35]=e("div",{class:"perf-label"},"å±å¹•",-1)),e("div",Bs,[e("div",{class:"perf-bar",style:w({width:`${o.phone.screenQuality||4*20}%`})},null,4),e("span",Rs,l(o.phone.screenQuality||4)+"/5",1)])])])])):o.activeTab==="features"?(i(),a("div",Ls,[s[39]||(s[39]=e("h4",{class:"section-subtitle"},"äº§å“ç‰¹ç‚¹",-1)),e("ul",Is,[(i(!0),a(u,null,_(o.phone.features,(t,d)=>(i(),a("li",{key:d,class:"feature-item"},[s[37]||(s[37]=e("div",{class:"feature-marker"},"âœ“",-1)),e("div",Ns,l(t),1)]))),128))]),o.phone.usage&&o.phone.usage.length?(i(),a("div",Fs,[s[38]||(s[38]=e("h4",{class:"section-subtitle"},"é€‚ç”¨åœºæ™¯",-1)),e("div",Ss,[(i(!0),a(u,null,_(o.phone.usage,t=>(i(),a("span",{key:t,class:"usage-tag"},l(t),1))),128))])])):D("",!0)])):o.activeTab==="reviews"?(i(),a("div",xs,[s[43]||(s[43]=e("h4",{class:"section-subtitle"},"ç”¨æˆ·è¯„ä»·",-1)),e("div",Ps,[s[42]||(s[42]=e("h5",null,"å‘è¡¨è¯„è®º",-1)),e("div",Us,[e("div",As,[s[40]||(s[40]=e("span",null,"è¯„åˆ†:",-1)),m(h,{modelValue:o.newReview.rating,"onUpdate:modelValue":s[10]||(s[10]=t=>o.newReview.rating=t)},null,8,["modelValue"])]),m(L,{modelValue:o.newReview.comment,"onUpdate:modelValue":s[11]||(s[11]=t=>o.newReview.comment=t),type:"textarea",rows:3,placeholder:"åˆ†äº«æ‚¨çš„ä½¿ç”¨ä½“éªŒ..."},null,8,["modelValue"]),m(f,{type:"primary",onClick:o.submitReview,disabled:!o.newReview.rating||!o.newReview.comment},{default:V(()=>s[41]||(s[41]=[U(" æäº¤è¯„ä»· ")])),_:1,__:[41]},8,["onClick","disabled"])])]),e("div",Gs,[o.reviews.length===0?(i(),a("div",Es," æš‚æ— è¯„ä»·ï¼Œå¿«æ¥å‘è¡¨ç¬¬ä¸€æ¡è¯„ä»·å§ï¼ ")):D("",!0),(i(!0),a(u,null,_(o.reviews,(t,d)=>(i(),a("div",{key:d,class:"review-item"},[e("div",Xs,[e("div",Ys,[e("div",zs,l(t.username.charAt(0).toUpperCase()),1),e("div",Os,[e("div",Qs,l(t.username),1),e("div",Ws,l(o.formatDate(t.date)),1)])]),e("div",js,[m(h,{modelValue:t.rating,"onUpdate:modelValue":v=>t.rating=v,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])]),e("div",qs,l(t.comment),1)]))),128))])])):D("",!0)])])])])])):D("",!0),o.phone&&o.similarPhones.length?(i(),a("div",Hs,[s[44]||(s[44]=e("h3",{class:"section-title"},"ç›¸å…³æŽ¨è",-1)),e("div",Js,[(i(!0),a(u,null,_(o.similarPhones,t=>(i(),a("div",{key:t.id,class:"similar-phone-card",onClick:d=>o.viewDetail(t.id)},[e("img",{src:t.image,alt:t.name,class:"similar-phone-image"},null,8,Zs),e("div",$s,[e("div",eo,l(t.name),1),e("div",so,"Â¥"+l(o.formatPrice(t.price)),1)])],8,Ks))),128))])])):!o.phone&&!o.loading?(i(),a("div",oo,[s[45]||(s[45]=e("h2",null,"æœªæ‰¾åˆ°æ‰‹æœº",-1)),s[46]||(s[46]=e("p",null,"æ— æ³•æ‰¾åˆ°ç›¸å…³æ‰‹æœºä¿¡æ¯",-1)),e("button",{onClick:s[12]||(s[12]=(...t)=>o.goBack&&o.goBack(...t)),class:"primary-btn"},"è¿”å›žåˆ—è¡¨")])):D("",!0)])])])}const io=ve(we,[["render",to],["__scopeId","data-v-e6c2edc7"]]);export{io as default};
